sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Context","MDG/Help/util/formatter","sap/ui/model/Filter","sap/m/MessageBox","sap/m/MessageToast"],function(t,e,a,n,o,r){"use strict";return t.extend("MDG.Help.controller.projectDetail",{formatter:a,onInit:function(){this.oBundle=this.getOwnerComponent().getModel("i18n").getResourceBundle();var t=this;if(!this.newQuotation){this.newQuotation=sap.ui.xmlfragment("MDG.Help.fragment.createQuotation",this);this.getView().addDependent(this.newQuotation)}if(!this.quotationCart){this.quotationCart=sap.ui.xmlfragment("MDG.Help.fragment.AddtoCart",this);this.getView().addDependent(this.quotationCart)}if(!this.itemSummary){this.itemSummary=sap.ui.xmlfragment("MDG.Help.fragment.itemSummary",this);this.getView().addDependent(this.itemSummary)}if(!this.valueHelpForCustomerContact){this.valueHelpForCustomerContact=new sap.ui.xmlfragment("MDG.Help.fragment.valueHelpForCustomerContact",this);this.getView().addDependent(this.valueHelpForCustomerContact)}this.getOwnerComponent().getRouter().getRoute("projectDetail").attachPatternMatched(function(a){var n=t.getOwnerComponent().getModel("customerInfo");t.projectId=a.getParameter("arguments").projectId;t.path=a.getParameter("arguments").id;this.getView().getModel("appView").oData.RequestIdSelected=a.getParameter("arguments").id;var o=new e(n,"/"+t.path);t.getView().setModel(new sap.ui.model.json.JSONModel(o.getObject()));t.getView().setModel(new sap.ui.model.json.JSONModel([]),"cartItemSummary");t.handleCustomerProject(a.getParameter("arguments").projectId);t.newCustomerId=t.getOwnerComponent().getModel("customerProjectInfo").oData!=undefined?t.getOwnerComponent().getModel("customerProjectInfo").oData[0].id:"";t.handleQuotationTableDetails(a.getParameter("arguments").projectId);t.handleCollectionName();var r=t.getOwnerComponent().getModel("CustomerProjectsModel");t.path1=a.getParameter("arguments").newPro;var o=new e(r,"/"+t.path1);t.getView().setModel(new sap.ui.model.json.JSONModel(o.getObject()),"ProjectsDataModel");t.handleProjectType(a.getParameter("arguments").id);t.handleProjectCategory(a.getParameter("arguments").id);t.handleSalesStage(a.getParameter("arguments").id);t.handleCustomerQuotation(a.getParameter("arguments").projectId);t.handleContactTypeDetail(a.getParameter("arguments").id)},this);t.maxId=100+t.getOwnerComponent().getModel("customerInfo").getData().length;t.handleQuotationItemsDetail()},handleDeleteContact:function(t){var e=this;var a=e.projectId;var n=t.getSource().getBindingContext("newContactModel").sPath.split("/")[1];o.confirm("Do you want delete the customer contact",{title:"Confirm Deletion",icon:o.Icon.WARNING,actions:[o.Action.YES,o.Action.NO],emphasizedAction:o.Action.YES,onClose:function(t){if(t==="YES"){var o={};$.ajax({url:"/DanaoStrapi/api/d-customer-projects?populate=*&filters[id][$eq]="+a,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var a=[];var i=t.data[0].attributes.d_customer_contacts.data;for(var s=0;s<i.length;s++)a.push(i[s]);var d=a[n].id;$.ajax({url:"/DanaoStrapi/api/d-customer-contacts/"+d,type:"DELETE",headers:{"content-type":"application/json"},data:JSON.stringify(o),dataType:"json",success:function(t){r.show("Project contact Deleted sucessfully",{closeOnBrowserNavigation:false});e.handleContactTypeDetail()}})}})}}})},handleDeleteQuotationPress:function(t){var e=this;var a=t.getSource().getBindingContext("QuotaionDetailsModel").sPath.split("/")[1];o.confirm("Do you want delete the Quotation?",{title:"Confirm Deletion",icon:o.Icon.WARNING,actions:[o.Action.YES,o.Action.NO],emphasizedAction:o.Action.YES,onClose:function(t){if(t==="YES"){$.ajax({url:"/DanaoStrapi/api/d-customer-projects?populate=*&filters[id][$eq]="+e.projectId,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var n=[];var o=t.data[0].attributes.d_customer_quotations.data;for(var i=0;i<o.length;i++)n.push(o[i]);var s=n[a].id;$.ajax({url:"/DanaoStrapi/api/d-customer-quotations/"+s,type:"DELETE",headers:{"content-type":"application/json"},dataType:"json",success:function(t){e.handleQuotationTableDetails(e.projectId);r.show("Quotation Deleted sucessfully",{closeOnBrowserNavigation:false})}})}})}}})},handleAddNewContact:function(){this.valueHelpForCustomerContact.open()},handleAddCustomerCancel:function(){this.valueHelpForCustomerContact.getContent()[0].getContent()[1].setValue("");this.valueHelpForCustomerContact.getContent()[0].getContent()[3].setValue("");this.valueHelpForCustomerContact.getContent()[0].getContent()[5].setValue("");this.valueHelpForCustomerContact.getContent()[0].getContent()[7].setValue("");this.valueHelpForCustomerContact.getContent()[0].getContent()[9].setValue("");this.valueHelpForCustomerContact.close()},handleContactTypeDetail:function(){var t=this;var e=t.projectId;$.ajax({url:"/DanaoStrapi/api/d-customer-contacts?populate=*&pagination[pageSize]=200",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(a){var n=[];var o=a.data;for(var r=0;r<o.length;r++){n.push({DCustomerContact_type:o[r].attributes,id:o[r].id})}t.handleDetailContactData(e,n)}});$.ajax({url:"/DanaoStrapi/api/d-customer-contact-types?populate=*",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){var a=[];var n=e.data;for(var o=0;o<n.length;o++){a.push({DCustomerContact_type:n[o].attributes.DCustomerContact_type,id:n[o].id})}var r=new sap.ui.model.json.JSONModel(a);t.getView().setModel(r,"contactTypeModel")}})},handleDetailContactData:function(t,e){var a=this;$.ajax({url:"/DanaoStrapi/api/d-customer-projects?populate=*&filters[id][$eq]="+t,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var n=t.data[0].attributes.d_customer_contacts.data;var o=[],r=[];var i=[];for(var s=0;s<e.length;s++){for(var d=0;d<n.length;d++){if(n[d].attributes.dCustomerContact_Name===e[s].DCustomerContact_type.dCustomerContact_Name){o.push(e[s])}}}a.getOwnerComponent().getModel("newContactModel").oData=o;a.getOwnerComponent().getModel("newContactModel").updateBindings(true)}})},handleAddCustomerContactPost:function(){var t=this;var e=t.newCustomerId;var a=t.projectId;$.ajax({url:"/DanaoStrapi/api/d-customer-projects?populate=*&filters[id][$eq]="+a,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){if(e.data.length!=0){var n=e.data[0].attributes.d_customer_contacts.data}var r=[],i=[],s=[];for(var d=0;d<n.length;d++){i.push(n[d].id)}$.ajax({url:"/DanaoStrapi/api/d-customer-contacts?populate=*",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){var n=e.data;var r=[];for(var s=0;s<i.length;s++){for(var d=0;d<n.length;d++){if(n[d].id===i[s]){r.push(n[d].attributes.d_customer_contact_type.data===null?"":n[d].attributes.d_customer_contact_type.data.attributes.DCustomerContact_type)}}}var u={data:{dCustomerContact_Name:t.valueHelpForCustomerContact.getContent()[0].getContent()[1].getValue(),dCustomer_ContactEmail:t.valueHelpForCustomerContact.getContent()[0].getContent()[3].getValue(),dCustomer_Conact_DirectPhone:t.valueHelpForCustomerContact.getContent()[0].getContent()[5].getValue(),d_customer_contact_type:[t.valueHelpForCustomerContact.getContent()[0].getContent()[7].getSelectedKey()],dCustomer_ContactMobile:t.valueHelpForCustomerContact.getContent()[0].getContent()[9].getValue()}};if(r.includes("Main Contact")===true){if(u.data.d_customer_contact_type[0]==="3"){sap.m.MessageBox.error("There can only be one Main contact")}else{$.ajax({url:"/DanaoStrapi/api/d-customer-contacts",type:"POST",headers:{"content-type":"application/json"},data:JSON.stringify(u),dataType:"json",success:function(e){var n=e.data.id;t.addCustomerContact(u,a,n);t.handleAddCustomerCancel();o.success("Contact has beeen Added")},error:function(t){o.error(t.responseJSON.error.message)}})}}else{$.ajax({url:"/DanaoStrapi/api/d-customer-contacts",type:"POST",headers:{"content-type":"application/json"},data:JSON.stringify(u),dataType:"json",success:function(e){var n=e.data.id;t.addCustomerContact(u,a,n);t.handleAddCustomerCancel();o.success("Contact has beeen Added")},error:function(t){o.error(t.responseJSON.error.message)}})}}})}})},addCustomerContact:function(t,e,a){var n=this;$.ajax({url:"/DanaoStrapi/api/d-customer-projects?populate=*&filters[id][$eq]="+e,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var o=t.data[0].attributes.d_customer_contacts.data;var r=[],i=[];var s=[];for(var d=0;d<o.length;d++){i.push(o[d].id)}i.push(a);var u={data:{d_customer_contacts:i}};$.ajax({url:"/DanaoStrapi/api/d-customer-projects/"+e,type:"PUT",headers:{"content-type":"application/json"},data:JSON.stringify(u),dataType:"json",success:function(t){n.handleContactTypeDetail()}})}})},handleDeleteUserPress:function(t){var e=this;t=e.projectId;o.confirm("Do you want to delete the project?",{title:"Confirm Deletion",icon:o.Icon.WARNING,actions:[o.Action.YES,o.Action.NO],emphasizedAction:o.Action.YES,onClose:function(t){if(t==="YES"){$.ajax({url:"/DanaoStrapi/api/d-customer-projects/"+e.projectId,type:"DELETE",headers:{"content-type":"application/json"},dataType:"json",success:function(t){r.show("Project has been deleted successfully!",{closeOnBrowserNavigation:false});e.onCloseDetailPress()}})}}})},onCloseDetailPress:function(t){var e=this;e.getView().getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");var a=sap.ui.core.UIComponent.getRouterFor(this);a.navTo("Detail",{id:e.newCustomerId,moduleIndex:"0",newprojectId:e.projectId})},handleEditUserPress:function(){var t=this;t.getView().getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");t.getView().getModel("appView").updateBindings(true);t.getOwnerComponent().getRouter().navTo("addNewProject",{AddPro:t.newCustomerId,mode:"Edit",projectId:t.projectId})},handleCustomerProject:function(t){var e=this;$.ajax({url:"/DanaoStrapi/api/d-customer-projects?populate=*&filters[id][$eq]="+t,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var a=t.data;var n=[],o=[],r=[];for(var i=0;i<a.length;i++){n.push(a[i].attributes.d_project_type.data.attributes)}for(var s=0;s<a.length;s++){o.push(a[s].attributes.d_project_sales_stage.data.attributes)}for(var d=0;d<a.length;d++){r.push(a[d].attributes.d_project_category.data.attributes)}e.getView().setModel(new sap.ui.model.json.JSONModel(n),"proDataModel");e.getView().getModel("proDataModel").updateBindings(true);e.getView().setModel(new sap.ui.model.json.JSONModel(o),"salesModel");e.getView().getModel("salesModel").updateBindings(true);e.getView().setModel(new sap.ui.model.json.JSONModel(r),"categModel");e.getView().getModel("categModel").updateBindings(true)}})},handlenewQuotation:function(){this.handleQuotationItemsDetail();this.newQuotation.getContent()[0].getContentLeft()[1].setSelectedKey(null);this.newQuotation.getContent()[0].getContentMiddle()[1].setSelectedKey(null);this.newQuotation.open()},onCloseQuotation:function(){this.newQuotation.close()},handleCollectionName:function(){var t=this;$.ajax({url:"/DanaoStrapi/api/d-collections?populate=*",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){var a=e.data;var n=[];for(var o=0;o<a.length;o++){a[o].attributes.id=a[o].id;n.push(a[o].attributes)}t.getView().setModel(new sap.ui.model.json.JSONModel(n),"collectionModel");t.getView().getModel("collectionModel").updateBindings(true);console.log(n)}})},handleProjectType:function(){var t=this;$.ajax({url:"/DanaoStrapi/api/d-project-types?populate=*",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){var a=e.data;var n=[];for(var o=0;o<a.length;o++){a[o].attributes.id=a[o].id;n.push(a[o].attributes)}t.getView().setModel(new sap.ui.model.json.JSONModel(n),"ProjectTypeModel")}})},handleSalesStage:function(){var t=this;$.ajax({url:"/DanaoStrapi/api/d-project-sales-stages?populate=*",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){var a=e.data;var n=[];for(var o=0;o<a.length;o++){a[o].attributes.id=a[o].id;n.push(a[o].attributes)}t.getView().setModel(new sap.ui.model.json.JSONModel(n),"ProjectModel")}})},handleProjectCategory:function(){var t=this;$.ajax({url:"/DanaoStrapi/api/d-project-categories?populate=*",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){var a=e.data;var n=[];for(var o=0;o<a.length;o++){a[o].attributes.id=a[o].id;n.push(a[o].attributes)}t.getView().setModel(new sap.ui.model.json.JSONModel(n),"ProjectCategoryModel")}})},handleSelectCollection:function(t){var e=this;e.collectionData=t.getSource().getSelectedItem().getBindingContext("collectionModel").getObject().d_products.data;e.selectedData=t.getSource().getSelectedItem().getBindingContext("collectionModel").getObject().d_product_types.data;var a=[];for(var n=0;n<e.selectedData.length;n++){a.push({id:e.selectedData[n].id,DProduct_Type:e.selectedData[n].attributes.DProduct_Type})}e.getView().setModel(new sap.ui.model.json.JSONModel(a),"categoryModel")},handleSelectCategory:function(t){var e=this;e.categoryData=t.getSource().getSelectedItem().getBindingContext("categoryModel").getObject().id},onPressGo:function(){var t=this;$.ajax({url:"/DanaoStrapi/api/d-products?populate=*",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){var a=e.data,n=[],o=[];for(var r=0;r<t.collectionData.length;r++){for(var i=0;i<a.length;i++){if(t.categoryData==null&&t.collectionData[r].attributes.DProduct_Name==a[i].attributes.DProduct_Name){n.push(a[i])}}}for(var s=0;s<a.length;s++){if(t.categoryData==a[s].attributes.d_product_type.data.id){o.push(a[s])}}var d=n;var u=o;e.data=d.concat(u);var c=0;t.newQuotation.getContent()[1].getContent()[0].removeAllContent();for(var l=0;l<e.data.length;l++){if(c==0){c++;var g=new sap.ui.layout.BlockLayoutRow;t.newQuotation.getContent()[1].getContent()[0].addContent(g)}else{c--}var p=new sap.ui.layout.BlockLayoutCell;var C=new sap.m.FlexBox({height:"3.5rem"});var m=new sap.ui.layout.VerticalLayout({});var h=new sap.m.ObjectIdentifier({title:e.data[l].attributes.DProduct_Name});h.addStyleClass("sapUiTinyMarginBottom");var f=new sap.m.Label({text:"Product Number : "+e.data[l].attributes.DProduct_Number,class:"sapUiSmallMarginBottom"});f.addStyleClass("sapUiSmallMarginBottom");var y=new sap.m.ObjectStatus({text:"Available",state:"Success"});m.addContent(h);m.addContent(f);m.addContent(y);C.addItem(m);var b=new sap.m.FlexBox({renderType:"Bare",justifyContent:"Center"});var S=new sap.m.Image({height:"15rem",width:"15rem",src:e.data[l].attributes.DProduct_Image.data[0].attributes.name});S.addStyleClass("QuotationImageClass");b.addItem(S);p.addContent(C);p.addContent(b);var _=new sap.m.Button({press:function(e){var a=e.getSource().getParent().getParent().getContent()[0].getItems()[0].getContent()[1].getText().split(" : ")[1];t.handleitemSummary(a);t.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[24].setSelectedIndex(-1);t.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[1].setVisible(false);t.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[3].setVisible(false);t.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[5].setVisible(false);t.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[7].setVisible(false);t.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[8].setValue(0)},icon:"sap-icon://cart-3",type:"Emphasized"});var D=new sap.m.FlexBox({alignItems:"Center",justifyContent:"End",items:new sap.m.ObjectListItem({number:Math.round(t.customerTypeArr/100*e.data[l].attributes.DProduct_Price_Grade_A),numberUnit:"USD",numberState:"Success"})});var v=new sap.m.HBox({items:[_,D]});D.addStyleClass("welcomePrice");p.addContent(v);g.addContent(p)}}})},handleCustomerQuotation:function(t){t=this.getView().getModel("appView").getProperty("/customerContactId");var e=this;$.ajax({url:"/DanaoStrapi/api/d-customer-types?populate=*&filters[id][$eq]="+t,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var a=t.data;e.customerTypeArr=[];for(var n=0;n<a.length;n++){e.customerTypeArr.push(a[n].attributes.dCustomer_Type_DiscStructure)}e.getView().getModel("appView").setProperty("/discountPrice",e.customerTypeArr[0]);e.getOwnerComponent().getModel("qCustomerTypeModels").oData=e.customerTypeArr;e.getOwnerComponent().getModel("qCustomerTypeModels").updateBindings(true)}})},handleQuotationItemsDetail:function(){var t=this;$.ajax({url:"/DanaoStrapi/api/d-products?populate=*",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){console.log(e.data);t.newQuotation.getContent()[1].getContent()[0].removeAllContent();var a=0;for(var n=0;n<e.data.length;n++){if(a==0){a++;var o=new sap.ui.layout.BlockLayoutRow;t.newQuotation.getContent()[1].getContent()[0].addContent(o)}else{a--}var r=new sap.ui.layout.BlockLayoutCell;var i=new sap.m.FlexBox({height:"3.5rem"});var s=new sap.ui.layout.VerticalLayout({});var d=new sap.m.ObjectIdentifier({title:e.data[n].attributes.DProduct_Name});d.addStyleClass("sapUiTinyMarginBottom");var u=new sap.m.Label({text:"Product Number : "+e.data[n].attributes.DProduct_Number,class:"sapUiSmallMarginBottom"});u.addStyleClass("sapUiSmallMarginBottom");var c=new sap.m.ObjectStatus({text:"Available",state:"Success"});s.addContent(d);s.addContent(u);s.addContent(c);i.addItem(s);var l=new sap.m.FlexBox({renderType:"Bare",justifyContent:"Center"});var g=new sap.m.Image({height:"15rem",width:"15rem",src:e.data[n].attributes.DProduct_Image.data[0].attributes.name});g.addStyleClass("QuotationImageClass");l.addItem(g);r.addContent(i);r.addContent(l);var p=new sap.m.Button({press:function(e){var a=e.getSource().getParent().getParent().getContent()[0].getItems()[0].getContent()[1].getText().split(" : ")[1];t.handleitemSummary(a);t.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[24].setSelectedIndex(-1);t.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[1].setVisible(false);t.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[3].setVisible(false);t.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[5].setVisible(false);t.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[7].setVisible(false);t.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[8].setValue(0)},icon:"sap-icon://cart-3",type:"Emphasized"});var C=new sap.m.FlexBox({alignItems:"Center",justifyContent:"End",items:new sap.m.ObjectListItem({number:Math.round(t.customerTypeArr/100*e.data[n].attributes.DProduct_Price_Grade_A),numberUnit:"USD",numberState:"Success"})});var m=new sap.m.HBox({items:[p,C]});C.addStyleClass("welcomePrice");r.addContent(m);o.addContent(r)}}})},onCloseCart:function(){this.quotationCart.close()},handleitemSummary:function(t){var e=this;$.ajax({url:"/DanaoStrapi/api/d-products?populate=*&filters[DProduct_Number][$eq]="+t,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var a=t.data;var n=[];for(var o=0;o<a.length;o++){n.push(a[o].attributes)}if(n[0].d_finish.data==null){sap.m.MessageBox.error("Selected Product doesn't have the finishing Details to show")}else{e.selectedFinishId=n[0].d_finish.data.id;e.handleitemfinishes(e.selectedFinishId);e.getOwnerComponent().getModel("quotationItemsDetial").oData=n;e.getOwnerComponent().getModel("quotationItemsDetial").updateBindings(true)}}})},handleitemfinishes:function(t){var e=this;$.ajax({url:"/DanaoStrapi/api/d-finishes?populate=*&filters[id][$eq]="+t,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var a=t.data;var n=[],o=[],r=[],i=[],s=[],d=[];for(var u=0;u<a.length;u++){n.push(a[u].attributes)}if(n[0].d_accents.data.length==0){e.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[4].setText("");e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[15].setVisible(false)}else{e.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[4].setText("Selection Display(Accent)");e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[15].setVisible(true);e.selectedAccentId=n[0].d_accents.data[0].id;e.handleItemAccent(e.selectedAccentId)}if(n[0].d_frame_straps.data.length==0){e.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[2].setText("");e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[11].setVisible(false)}else{e.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[2].setText("Selection Display(Straps)");e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[11].setVisible(true);e.selectedStrapId=n[0].d_frame_straps.data[0].id;e.handleItemStraps(e.selectedStrapId)}if(n[0].d_frame_colors.data.length==0){e.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[0].setText("");e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[3].setVisible(false)}else{e.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[0].setText("Selection Display(Frames)");e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[3].setVisible(true);e.selectedFrameId=n[0].d_frame_colors.data[0].id;e.handleitemFrames(e.selectedFrameId)}for(var c=0;c<t.data[0].attributes.d_fabric_grades.data.length;c++){o.push({id:t.data[0].attributes.d_fabric_grades.data[c].id,DFabric_Grade:t.data[0].attributes.d_fabric_grades.data[c].attributes.DFabric_Grade})}if(t.data[0].attributes.d_fabric_grades.data.length==0){e.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[6].setText("");e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[23].setVisible(false)}else{e.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[6].setText("Selection Display(Finishes)");e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[23].setVisible(true)}for(var l=0;l<t.data[0].attributes.d_batylines.data.length;l++){d.push({id:t.data[0].attributes.d_batylines.data[l].id,DBatyline_Name:t.data[0].attributes.d_fabric_grades.data[l].attributes.DBatyline_Name})}if(t.data[0].attributes.d_batylines.data.length==0){e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[19].setVisible(false)}else{e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[19].setVisible(true)}for(var g=0;g<t.data[0].attributes.d_frames.data.length;g++){r.push({id:t.data[0].attributes.d_frames.data[g].id,DFrame_Color:t.data[0].attributes.d_frames.data[g].attributes.DFrame_Color,DFrame_Material_Code:t.data[0].attributes.d_frames.data[g].attributes.DFrame_Material_Code,DFrame_Material_Name:t.data[0].attributes.d_frames.data[g].attributes.DFrame_Material_Name})}for(var p=0;p<t.data[0].attributes.d_frame_straps.data.length;p++){i.push({id:t.data[0].attributes.d_frame_straps.data[p].id,DFrame_Straps_Name:t.data[0].attributes.d_frame_straps.data[p].attributes.DFrame_Straps_Name,DFrame_Straps_Code:t.data[0].attributes.d_frame_straps.data[p].attributes.DFrame_Straps_Code})}for(var C=0;C<t.data[0].attributes.d_accents.data.length;C++){s.push({id:t.data[0].attributes.d_accents.data[C].id,DAccent_Name:t.data[0].attributes.d_accents.data[C].attributes.DAccent_Name,DAccent_Code:t.data[0].attributes.d_accents.data[C].attributes.DAccent_Code})}e.getView().setModel(new sap.ui.model.json.JSONModel(s),"accentModel");e.getView().getModel("accentModel").updateBindings(true);e.getView().setModel(new sap.ui.model.json.JSONModel(d),"batyLineModel");e.getView().getModel("batyLineModel").updateBindings(true);e.getView().setModel(new sap.ui.model.json.JSONModel(i),"strapsModel");e.getView().getModel("strapsModel").updateBindings(true);e.getView().setModel(new sap.ui.model.json.JSONModel(r),"framesModel");e.getView().getModel("framesModel").updateBindings(true);e.getOwnerComponent().getModel("quotationItemFinishes").oData=o;e.getOwnerComponent().getModel("quotationItemFinishes").updateBindings(true);e.mode="CREATE";e.quotationCart.open()}})},handleitemFrames:function(t){var e=this;$.ajax({url:"/DanaoStrapi/api/d-frame-colors?populate=*&filters[id][$eq]="+t,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var a=[];for(var n=0;n<t.data.length;n++){a.push({id:t.data[n].id,DFrameColor:t.data[n].attributes.DFrameColor,name:window.location.origin+"/DanaoStrapi"+t.data[n].attributes.DFrameColor_Image.data[0].attributes.url})}e.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[1].setVisible(true);e.getView().setModel(new sap.ui.model.json.JSONModel(a),"framesImageModel");e.getView().getModel("framesImageModel").updateBindings(true);e.mode="CREATE";e.quotationCart.open()}})},handleItemStraps:function(t){var e=this;$.ajax({url:"/DanaoStrapi/api/d-frame-straps?populate=*&filters[id][$eq]="+t,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var a=[];for(var n=0;n<t.data.length;n++){a.push({id:t.data[n].id,DFrame_Straps_Name:t.data[n].attributes.DFrame_Straps_Name,url:window.location.origin+"/DanaoStrapi"+t.data[n].attributes.DFrame_Straps_Image.data[0].attributes.url})}e.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[3].setVisible(true);e.getView().setModel(new sap.ui.model.json.JSONModel(a),"frameStrapModel");e.getView().getModel("frameStrapModel").updateBindings(true)}})},handleItemAccent:function(t){var e=this;$.ajax({url:"/DanaoStrapi/api/d-accents?populate=*&filters[id][$eq]="+t,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var a=[];for(var n=0;n<t.data.length;n++){a.push({id:t.data[n].id,DAccent_Name:t.data[n].attributes.DAccent_Name,Image:window.location.origin+"/DanaoStrapi"+t.data[n].attributes.DAccent_Image.data[0].attributes.url})}e.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[5].setVisible(true);e.getView().setModel(new sap.ui.model.json.JSONModel(a),"framesAccentModel");e.getView().getModel("framesAccentModel").updateBindings(true)}})},handleGradeDisplay:function(t){var e=this;$.ajax({url:"/DanaoStrapi/api/d-fabric-grades?populate=*&filters[id][$eq]="+t,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(a){var n=a.data[0].attributes.d_fabrics.data;var o=[];for(var r=0;r<n.length;r++){o.push({id:n[r].id,DFabric_Code:n[r].attributes.DFabric_Code,DFabric_Name:n[r].attributes.DFabric_Name,createdAt:n[r].attributes.createdAt,publishedAt:n[r].attributes.publishedAt,updatedAt:n[r].attributes.updatedAt})}e.handleImageDisplay(t,o)}})},handleImageDisplay:function(t,e){var a=this;a.gradeArr=e;$.ajax({url:"/DanaoStrapi/api/d-fabrics?populate=*&pagination[pageSize]=100",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){for(var e=0;e<a.gradeArr.length;e++){for(var n=0;n<t.data.length;n++){if(t.data[n].attributes.DFabric_Code==a.gradeArr[e].DFabric_Code){if(t.data[n].attributes.DFabric_Image.data[0].attributes.name.indexOf("https")!=-1)a.gradeArr[e]["imageUrl"]=t.data[n].attributes.DFabric_Image.data[0].attributes.name;else a.gradeArr[e]["imageUrl"]=window.location.origin+"/DanaoStrapi"+t.data[n].attributes.DFabric_Image.data[0].attributes.formats.thumbnail.url;a.gradeArr[e]["thumbNail"]=t.data[n].attributes.DFabric_Image.data[0].attributes.url;break}}}a.quotationCart.getContent()[1].getContent()[0].getContent()[1].getContent()[0].getContent()[7].setVisible(true);a.getOwnerComponent().getModel("fabricModel").oData=a.gradeArr;a.getOwnerComponent().getModel("fabricModel").updateBindings(true)}})},handleGradeButtonSelect:function(t){var e=this;e.selectedData=t.getSource().getSelectedButton().getBindingContext("quotationItemFinishes").getObject().id;if(e.selectedData===1){e.handleGradeDisplay(e.selectedData)}else if(e.selectedData===2){e.handleGradeDisplay(e.selectedData)}else if(e.selectedData===3){e.handleGradeDisplay(e.selectedData)}else{}},handleAddCartPress:function(){var t=this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[8].getValue();var e=this.getView().getModel("appView").getProperty("/totalAmount");if(this.selectedData===1){var a=Math.round(this.customerTypeArr/100*this.getView().getModel("quotationItemsDetial").oData[0].DProduct_Price_Grade_A)}else if(this.selectedData==2){a=Math.round(this.customerTypeArr/100*this.getView().getModel("quotationItemsDetial").oData[0].DProduct_Price_GradeB)}else{}e=a*t;if(this.mode=="CREATE"){var n={itemDetails:this.getView().getModel("quotationItemsDetial").oData[0],frame:this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[4].getSelectedButton()!=undefined?this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[4].getSelectedButton().getText():"",straps:this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[12].getSelectedButton()!=undefined?this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[12].getSelectedButton().getText():"",accent:this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[16].getSelectedButton()!=undefined?this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[16].getSelectedButton().getText():"",grade:this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[24].getSelectedButton()!=undefined?this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[24].getSelectedButton().getText():"",dProduct_UnitPrice:a!=undefined?Math.round(this.customerTypeArr/100*a):"",dProduct_Total_Price:e!=undefined?Math.round(this.customerTypeArr/100*e):"",Qty:this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[8].getValue(),SKU:"33230110"+this.getView().getModel("cartItemSummary").oData.length,fabricType:this.selectedFabric!=undefined?this.selectedFabric:"",fabricName:this.selectedFabric!=undefined?this.selectedFabric.DFabric_Name:"",imageUrl:this.selectedFabric!=undefined?this.selectedFabric.imageUrl:"",frameImage:this.selectedFrame!=undefined?this.selectedFrame:"",strapImage:this.selectedStrap!=undefined?this.selectedStrap:"",accentImage:this.selectedAccent!=undefined?this.selectedAccent:"",frameColor:this.selectedFrameColor!=undefined?this.selectedFrameColor:"",createdAt:this.selectedFabric!=undefined?this.selectedFabric.createdAt:"",fabricId:this.selectedFabric!=undefined?this.selectedFabric.id:""};var o=this.getView().getModel("appView").getProperty("/totalAmount");o+=n.dProduct_Total_Price;var r=this.getView().getModel("appView").getProperty("/qty");r+=this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[8].getValue();this.getView().getModel("appView").setProperty("/totalAmount",o);this.getView().getModel("appView").setProperty("/qty",r);if(this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[8].getValue()>0){this.getView().getModel("cartItemSummary").oData.push(n);sap.m.MessageToast.show("Item is added to the cart");this.getView().getModel("cartItemSummary").updateBindings(true);this.quotationCart.close()}else sap.m.MessageBox.error("Please enter the quantity")}else if(this.mode=="EDIT"){this.cartObjUpdated={itemDetails:this.getView().getModel("quotationItemsDetial").oData[0],frame:this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[4].getSelectedButton()!=undefined?this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[4].getSelectedButton().getText():"",straps:this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[12].getSelectedButton()!=undefined?this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[12].getSelectedButton().getText():"",accent:this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[16].getSelectedButton()!=undefined?this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[16].getSelectedButton().getText():"",grade:this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[24].getSelectedButton()!=undefined?this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[24].getSelectedButton().getText():"",dProduct_UnitPrice:a!=undefined?Math.round(this.customerTypeArr/100*a):"",dProduct_Total_Price:e!=undefined?Math.round(this.customerTypeArr/100*e):"",Qty:this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[8].getValue(),SKU:"33230110"+this.getView().getModel("cartItemSummary").oData.length,fabricType:this.selectedFabric!=undefined?this.selectedFabric:"",fabricName:this.selectedFabric!=undefined?this.selectedFabric.DFabric_Name:"",imageUrl:this.selectedFabric!=undefined?this.selectedFabric.imageUrl:"",frameImage:this.selectedFrame!=undefined?this.selectedFrame:"",strapImage:this.selectedStrap!=undefined?this.selectedStrap:"",accentImage:this.selectedAccent!=undefined?this.selectedAccent:"",frameColor:this.selectedFrameColor!=undefined?this.selectedFrameColor:"",createdAt:this.selectedFabric!=undefined?this.selectedFabric.createdAt:"",fabricId:this.selectedFabric!=undefined?this.selectedFabric.id:""};var i=this.getView().getModel("appView").getProperty("/totalAmount");i+=this.cartObjUpdated.dProduct_Total_Price-this.selectedProductPrice;var s=this.getView().getModel("appView").getProperty("/qty");s+=this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[8].getValue()-this.selectedQuantity;this.getView().getModel("appView").setProperty("/totalAmount",i);this.getView().getModel("appView").setProperty("/qty",s);if(this.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[8].getValue()>0){this.getView().getModel("cartItemSummary").oData[this.selectedEditPath]=this.cartObjUpdated;this.getView().getModel("cartItemSummary").updateBindings(true);this.quotationCart.close()}else sap.m.MessageBox.error("Please enter the quantity")}},handleCartSelectedItems:function(){this.itemSummary.open()},handleCancelItemSummaryPress:function(){this.itemSummary.close()},onPressEditItem:function(t){var e=this;e.selectedEditPath=t.getSource().getParent().getParent().getParent().getBindingContext("cartItemSummary").getPath().split("/")[1];e.selectedProductPrice=t.getSource().getParent().getParent().getParent().getModel("cartItemSummary").oData[t.getSource().getParent().getParent().getParent().getBindingContext("cartItemSummary").getPath().split("/")[1]].dProduct_Total_Price;e.selectedQuantity=t.getSource().getParent().getParent().getParent().getModel("cartItemSummary").oData[t.getSource().getParent().getParent().getParent().getBindingContext("cartItemSummary").getPath().split("/")[1]].Qty;var a=t.getSource().getBindingContext("cartItemSummary").getObject().grade;var n=e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[24].getButtons();for(var o=0;o<n.length;o++){if(a==n[o].getBindingContext("quotationItemFinishes").getObject().DFabric_Grade){var r=n[o].getBindingContext("quotationItemFinishes").getObject().id;e.handleGradeDisplay(r);e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[24].setSelectedIndex(o)}}var i=t.getSource().getBindingContext("cartItemSummary").getObject().Qty;if(i){e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[8].setValue(i)}var s=t.getSource().getBindingContext("cartItemSummary").getObject().frame;if(s){e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[4].getSelectedButton().setText(s)}else{e.quotationCart.getContent()[1].getContent()[0].getContent()[0].getContent()[0].getContent()[4].getSelectedButton().setVisible(false)}var d=t.getSource().getBindingContext("cartItemSummary").getObject().itemDetails.DProduct_Number;if(d){e.quotationCart.getContent()[0].getContent()[0].getContent()[0].getContent()[0].getContent()[2].setText(d)}else{e.quotationCart.getContent()[0].getContent()[0].getContent()[0].getContent()[0].getContent()[2].getText()}var u=t.getSource().getBindingContext("cartItemSummary").getObject().itemDetails.DProduct_Name;if(u){e.quotationCart.getContent()[0].getParent().setTitle(u)}else{e.quotationCart.getContent()[0].getParent().getTitle()}var c=t.getSource().getBindingContext("cartItemSummary").getObject().itemDetails.DProduct_Image.data[0].attributes.formats.thumbnail.name.split("thumbnail_")[1];if(c){e.quotationCart.getContent()[0].getContent()[0].getContent()[1].getContent()[1].getPages()[0].getItems()[0].setSrc(c)}else{e.quotationCart.getContent()[0].getContent()[0].getContent()[1].getContent()[1].getPages()[0].getItems()[0].getSrc()}e.quotationCart.open();e.mode="EDIT"},onPressDeleteItem:function(t){var e=this;var a=t.getSource().getParent().getParent().getParent().getModel("cartItemSummary").oData[t.getSource().getBindingContext("cartItemSummary").sPath.split("/")[1]].dProduct_Total_Price;var n=parseInt(e.itemSummary.getContent()[1].getItems()[0].mAggregations.items[1].getText().split("$")[1]);var r=n-a;e.selectedPath=t.getSource().getBindingContext("cartItemSummary").sPath.split("/")[1];o.confirm("Do you want to delete the Item?",{title:"Confirm Deletion",icon:o.Icon.WARNING,actions:[o.Action.YES,o.Action.NO],emphasizedAction:o.Action.YES,onClose:function(t){if(t==="YES"){e.getView().getModel("appView").setProperty("/totalAmount",r);e.getView().getModel("cartItemSummary").oData.splice(e.selectedPath,1);e.getView().getModel("cartItemSummary").updateBindings(true)}}})},handleUpdateItems:function(t,e,a){var n=this;var t={data:{d_customer_contacts:[a]}};$.ajax({url:"/DanaoStrapi/api/d-customers/"+e,type:"PUT",headers:{"content-type":"application/json"},data:JSON.stringify(t),dataType:"json",success:function(t){}})},handleDraftItemSummaryPress:function(t){var e=this;var a=e.getView().getModel("cartItemSummary").oData;e.servicecall=0;e.quotationDetailArr=[];for(var n=0;n<a.length;n++){var o={data:{dProduct_SKU:a[n].SKU,dProduct_Quantity:a[n].Qty+"",d_frames:a[n].frame,d_frame_straps:a[n].straps,d_ropes:"",d_batylines:"",d_accents:a[n].accent,d_frame_tops:"",d_weaves:"",createdAt:a[n].createdAt,d_fabric_grades:a[n].grade,d_Quotation_ProdNotes:"",dFabric_ID:a[n].fabricId!=undefined?a[n].fabricId.toString():"",dProduct_UnitPrice:a[n].dProduct_UnitPrice!=undefined?a[n].dProduct_UnitPrice.toString():"",dProduct_Total_Price:a[n].dProduct_Total_Price!=undefined?a[n].dProduct_Total_Price.toString():"",dProduct_Name:a[n].itemDetails!=undefined?a[n].itemDetails.DProduct_Name:"",dProduct_Thumbnail:a[n].itemDetails!=undefined?a[n].itemDetails.DProduct_Image.data[0].attributes.name:""}};$.ajax({url:"/DanaoStrapi/api/d-customer-quotation-details",type:"POST",headers:{"content-type":"application/json"},data:JSON.stringify(o),dataType:"json",success:function(t){e.servicecall++;e.quotationDetailId=t.data.id;e.quotationDetailArr.push(t.data.id);if(a.length==e.servicecall)e.handlePushQuotationItemAfterPost()},error:function(t){var e=t}})}},handlePushQuotationItemAfterPost:function(){var t=this;var e=t.projectId;var a={data:{dQuotation_Item_Price:t.getView().getModel("appView").getProperty("/totalAmount")+"",dQuotation_Item_Quantity:t.getView().getModel("appView").getProperty("/qty")+"",DQuotation_Status:"Draft",d_customer:[t.newCustomerId],d_customer_project:[t.projectId],d_customer_quotation_details:t.quotationDetailArr}};$.ajax({url:"/DanaoStrapi/api/d-customer-quotations",type:"POST",headers:{"content-type":"application/json"},data:JSON.stringify(a),dataType:"json",success:function(e){var n=e.data.id;t.handleUpdateQuotationItemAfterPost(a,t.projectId,n);sap.m.MessageBox.success("Quotation has been created successfully");t.itemSummary.close();t.quotationCart.close();t.getView().getModel("appView").setProperty("/totalAmount",0);t.getView().getModel("appView").setProperty("/qty",0);t.getView().getModel("cartItemSummary").oData=[];t.getView().getModel("cartItemSummary").updateBindings(true)},error:function(t){var e=t}})},handleUpdateQuotationItemAfterPost:function(t,e,a){var n=this;$.ajax({url:"/DanaoStrapi/api/d-customer-projects?populate=*&filters[id][$eq]="+n.projectId,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){var r=e.data[0].attributes.d_customer_quotations.data;var i=[];for(var s=0;s<r.length;s++){i.push(r[s].id)}i.push(a);t={data:{d_customer_quotations:i}};$.ajax({url:"/DanaoStrapi/api/d-customer-projects/"+n.projectId,type:"PUT",headers:{"content-type":"application/json"},data:JSON.stringify(t),dataType:"json",success:function(t){n.handleQuotationTableDetails(n.projectId)},error:function(t){o.error(t.responseJSON.error.message)}})}})},handleQuotationTableDetails:function(t){var e=this;$.ajax({url:"/DanaoStrapi/api/d-customer-projects?populate=*&filters[id][$eq]="+e.projectId,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(t){var a=t.data;if(t.data.length>0){var n=t.data[0].attributes.d_customer_quotations.data;var o=t.data[0].attributes.d_customer_contacts.data}else{var o=[];var n=[]}var r=[],i=[];for(var s=0;s<n.length;s++){r.push({id:n[s].id,DQuotation_Status:n[s].attributes.DQuotation_Status,createdAt:n[s].attributes.createdAt,dQuotation_Item_Price:n[s].attributes.dQuotation_Item_Price,dQuotation_Item_Quantity:n[s].attributes.dQuotation_Item_Quantity,publishedAt:n[s].attributes.publishedAt,updatedAt:n[s].attributes.updatedAt})}for(var d=0;d<o.length;d++){i.push({id:o[d].id,dCustomerContact_Name:o[d].attributes.dCustomerContact_Name,dCustomer_ContactEmail:o[d].attributes.dCustomer_ContactEmail,dCustomer_Conact_DirectPhone:o[d].attributes.dCustomer_Conact_DirectPhone,dCustomer_ContactMobile:o[d].attributes.dCustomer_ContactMobile,createdAt:o[d].attributes.createdAt,updatedAt:o[d].attributes.updatedAt,publishedAt:o[d].attributes.publishedAt})}e.getOwnerComponent().getModel("QuotaionContactModel").oData=i;e.getOwnerComponent().getModel("QuotaionContactModel").updateBindings(true);e.getOwnerComponent().getModel("QuotaionDetailsModel").oData=r;e.getOwnerComponent().getModel("QuotaionDetailsModel").updateBindings(true)}})},handleFabricSelection:function(t){sap.m.MessageToast.show("Fabric "+t.getSource().getBindingContext("fabricModel").getObject().DFabric_Name+" is selected");this.selectedFabric=t.getSource().getBindingContext("fabricModel").getObject()},handleFrameSelection:function(t){sap.m.MessageToast.show(t.getSource().getBindingContext("framesImageModel").getObject().DFrameColor+" is selected");this.selectedFrame=t.getSource().getBindingContext("framesImageModel").getObject().name;this.selectedFrameColor=t.getSource().getBindingContext("framesImageModel").getObject().DFrameColor},handleStrapSelection:function(t){sap.m.MessageToast.show(t.getSource().getBindingContext("frameStrapModel").getObject().DFrame_Straps_Name+" is selected");this.selectedStrap=t.getSource().getBindingContext("frameStrapModel").getObject().url},handleAccentSelection:function(t){sap.m.MessageToast.show(t.getSource().getBindingContext("framesAccentModel").getObject().DAccent_Name+" is selected");this.selectedAccent=t.getSource().getBindingContext("framesAccentModel").getObject().Image},onPressQuotation:function(t){this.getOwnerComponent().getRouter().navTo("quotationDetailProject",{customerId:this.newCustomerId,id:this.projectId,ModuleIndex:t.getSource().getBindingContextPath().split("/")[1],QuotationId:t.getSource().getBindingContext("QuotaionDetailsModel").getObject().id})}})});