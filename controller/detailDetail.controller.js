sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Context","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/export/library","sap/ui/export/Spreadsheet"],function(e,t,s,a,i,o,n,r,l){"use strict";return e.extend("MDG.Help.controller.detailDetail",{onInit:function(){var e=this.getOwnerComponent().getModel("i18n");var s={isProjectArchived:false,isProjectCancelled:false,isProjectEditable:false,isCRUDBtnsVisible:false,isRetriveVisible:false};var i=new a(s);this.getView().setModel(i,"DetailDetailView");this.getOwnerComponent().getRouter().getRoute("detailDetail").attachPatternMatched(function(e){var s=this.getOwnerComponent().getModel();var a="/programs/";var i="/Projects/";this.programObjectPath=e.getParameter("arguments").ProgramPath;this.projectObjectPath=e.getParameter("arguments").ProjectId;var o=new t(s,a+this.programObjectPath+i+this.projectObjectPath);this.getView().setBindingContext(o);this.users=o.getObject();if(o.getObject().status=="Archived"){this.getView().getModel("DetailDetailView").setProperty("/isProjectArchived",false);this.getView().getModel("DetailDetailView").setProperty("/isProjectCancelled",false);this.getView().getModel("DetailDetailView").setProperty("/isCRUDBtnsVisible",false);this.getView().getModel("DetailDetailView").setProperty("/isRetriveVisible",true)}else if(o.getObject().status=="Cancelled"){this.getView().getModel("DetailDetailView").setProperty("/isProjectCancelled",false);this.getView().getModel("DetailDetailView").setProperty("/isProjectArchived",false);this.getView().getModel("DetailDetailView").setProperty("/isCRUDBtnsVisible",false);this.getView().getModel("DetailDetailView").setProperty("/isRetriveVisible",true)}else{this.getView().getModel("DetailDetailView").setProperty("/isProjectCancelled",true);this.getView().getModel("DetailDetailView").setProperty("/isProjectArchived",true);this.getView().getModel("DetailDetailView").setProperty("/isCRUDBtnsVisible",true);this.getView().getModel("DetailDetailView").setProperty("/isRetriveVisible",false)}this.getView().getModel("DetailDetailView").updateBindings(true);this.teamMemRoles()},this)},onConfirmVendorsPress:function(e){var t=this;this.VendorsObj="";var s=e.getSource().getSelectedKey();this.getView().getModel().getData().assignedVendors=[];this.getOwnerComponent().getModel("vendorInfo").getData().forEach(function(e,a){if(e.vendor_Name==s){t.VendorsObj=e}});this.EditProject.getContent()[0].getContent()[14].setValue(e.getSource().getSelectedKey())},createColumns:function(e){if(e==1){return[{label:"Name",property:"customerName"},{label:"Email",property:"email"},{label:"Contact",property:"contact"},{label:"City",property:"city"},{label:"Country",property:"country"}]}if(e==2){return[{label:"Name",property:"vendor_Name"},{label:"Email",property:"vendor_email"},{label:"Contact",property:"vendor_contact"},{label:"City",property:"vendor_city"},{label:"Country",property:"vendor_country"}]}if(e==3){return[{label:"Team Members",property:"firstName"},{label:"Contact",property:"contact"},{label:"Email",property:"email"},{label:"Role",property:"role"}]}if(e==4){return[{label:"Milestone Name",property:"milestoneName"},{label:"Milestone Description",property:"milestonedes"},{label:"Start Date",property:"startDate_M"},{label:"End Date",property:"endDate_M"}]}},onExport:function(e){var t=e.getSource().getId().split("--")[1];var s,a;if(t=="downloadButtonIDCustomers"){s=this.getView().getBindingContext().getObject().customer;a=new sap.ui.export.Spreadsheet({workbook:{columns:this.createColumns(1)},dataSource:s,fileName:"customer.xlsx"});a.build()}if(t=="downloadButtonIDVendors"){s=this.getView().getBindingContext().getObject().assignedVendors;a=new sap.ui.export.Spreadsheet({workbook:{columns:this.createColumns(2)},dataSource:s,fileName:"vendor.xlsx"});a.build()}if(t=="downloadButtonIDteammember"){s=this.getView().getBindingContext().getObject().assigned_teammember;a=new sap.ui.export.Spreadsheet({workbook:{columns:this.createColumns(3)},dataSource:s,fileName:"TeamMember.xlsx"});a.build()}if(t=="downloadButtonIDmilestone"){s=this.getView().getBindingContext().getObject().milestones;a=new sap.ui.export.Spreadsheet({workbook:{columns:this.createColumns(4)},dataSource:s,fileName:"Milestone.xlsx"});a.build()}},handlePrintTask:function(){var e=this.getView().byId("vBxReport"),t=e.$()[0],s=t.innerHTML;var a=window.open("","","height=800,width=800");a.document.write("<html><head><title></title>");a.document.write("<link rel='stylesheet' href='applications/Manage_Programs/webapp/css/style.css'>");a.document.write("<link rel='stylesheet' href='https://sapui5.hana.ondemand.com/resources/sap/ui/core/themes/sap_belize_plus/library.css'>");a.document.write("<link rel='stylesheet' href='https://sapui5.hana.ondemand.com/resources/sap/ui/layout/themes/sap_belize_plus/library.css'>");a.document.write("<link rel='stylesheet' href='https://sapui5.hana.ondemand.com/resources/sap/ui/unified/themes/sap_belize_plus/library.css'>");a.document.write("<link rel='stylesheet' href='https://sapui5.hana.ondemand.com/resources/sap/ui/table/themes/sap_belize_plus/library.css'>");a.document.write("<link rel='stylesheet' href='https://sapui5.hana.ondemand.com/resources/sap/suite/ui/commons/themes/sap_belize_plus/library.css'>");a.document.write("<link rel='stylesheet' href='https://sapui5.hana.ondemand.com/resources/sap/m/themes/sap_belize_plus/library.css'>");a.document.write("<link rel='stylesheet' href='https://sapui5.hana.ondemand.com/resources/sap/tnt/themes/sap_belize_plus/library.css'>");a.document.write("<link rel='stylesheet' href='https://sapui5.hana.ondemand.com/resources/sap/f/themes/sap_belize_plus/library.css'>");a.document.write("<link rel='stylesheet' href='https://sapui5.hana.ondemand.com/resources/sap/viz/themes/sap_belize_plus/library.css'>");a.document.write("</head><body >");a.document.write(s);a.document.write("</body></html>");setTimeout(function(){a.print()},2e3);a.onafterprint=function(){setTimeout(function(){a.close()},4e3)}},handleAddProject:function(e){var t=this;var t=this;var s=this.ValidateEditAddProjectFragment();if(s==0){var a=t.getView().getModel().getData().programs[t.programObjectPath].Projects[t.projectObjectPath].assignedVendors;var i=t.VendorsObject==undefined?a:t.VendorsObject;t.getView().getModel().getData().programs[t.programObjectPath].Projects[t.projectObjectPath].assignedVendors=i;if(!t.CustomerObject==""){var o=t.getView().getModel().getData().programs[t.programObjectPath].Projects[t.projectObjectPath];var n=o.customer;o.customer=this.CustomerObject==undefined?n:this.CustomerObject}this.getView().getModel().updateBindings(true);this.EditProject.close();var r=sap.ui.core.UIComponent.getRouterFor(this);r.navTo("detailList",{objectId:this.programObjectPath})}else{sap.m.MessageBox.error("Please fill Mandatory fields.")}},onSelectCustomer:function(e){var t=this;var s=e.getParameter("selectedContexts");t.CustomerObject=[];e.getParameters().selectedContexts.forEach(function(e,s){var a=false;if(t.CustomerObject){var i=t.CustomerObject;for(var o=0;o<i.length;o++){if(i[o].customerName==e.getObject().customerName){a=true;break}}}if(!a)t.CustomerObject.push(e.getObject())});this.EditProject.getContent()[0].getContent()[11].setModel(new a(this.CustomerObject));this.EditProject.getModel().updateBindings(true)},openEditProject:function(e){var t=this;var s=this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath];var i=new sap.ui.model.json.JSONModel(s);this.EditProject.setModel(i);this.EditProject.getContent()[0].getContent()[14].setModel(new a(s.assignedVendors));this.EditProject.getContent()[0].getContent()[11].setModel(new a(s.customer));this.EditProject.open()},onSelectVendors:function(e){var t=this;var s=e.getParameter("selectedContexts");t.VendorsObject=[];e.getParameters().selectedContexts.forEach(function(e,s){var a=false;if(t.VendorsObject){var i=t.VendorsObject;for(var o=0;o<i.length;o++){if(i[o].vendor_Name==e.getObject().vendor_Name){a=true;break}}}if(!a)t.VendorsObject.push(e.getObject())});this.EditProject.getContent()[0].getContent()[14].setModel(new a(this.VendorsObject));this.EditProject.getModel().updateBindings(true)},onSearchVendorsValueHelp:function(e){this.SelectVendorsDialog.getBinding("items").filter([new sap.ui.model.Filter("vendor_Name",sap.ui.model.FilterOperator.Contains,e.getParameters().value)])},handleInputTokenDeleted:function(e){var t=this;this.EditProject.getModel().getData().assignedVendors.forEach(function(s,a){if(s.vendor_Name==e.getParameters().removedTokens[0].getText()){t.EditProject.getModel().getData().assignedVendors.splice(a,1);t.EditProject.getModel().updateBindings(true)}})},handleSearchAddVendorsFragment:function(e){this.assignedVendors.getBinding("items").filter([new sap.ui.model.Filter("vendor_Name",sap.ui.model.FilterOperator.Contains,e.getParameters().value)])},handleSearchAddTeamMem:function(e){this.assignTeamFragment.getBinding("items").filter([new sap.ui.model.Filter("tmName",sap.ui.model.FilterOperator.Contains,e.getParameters().value)])},onSearchSelectTaskValueHelp:function(e){this.SelectTaskDialog.getBinding("items").filter([new sap.ui.model.Filter("taskName",sap.ui.model.FilterOperator.Contains,e.getParameters().value)])},handleProjectCancel:function(e){var t=this;this.EditProject.close()},fullScreen:function(){this.getView().getModel("appView").setProperty("/layout","EndColumnFullScreen");this.byId("enterFullScreen").setVisible(false);this.byId("exitFullScreen").setVisible(true)},exitFullScreen:function(){this.getView().getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.byId("exitFullScreen").setVisible(false);this.byId("enterFullScreen").setVisible(true)},onCloseDetailPress:function(){this.getView().getModel("appView").setProperty("/actionButtonsInfo/midColumn/fullScreen",false);var e=this.getView().getModel("appView").oData.tileIndex;this.getOwnerComponent().getRouter().navTo("Master",{id:e})},openDeleteProject:function(e){var t=this;o.confirm("Are you sure you want to delete Project?",{title:"Confirm Deletion",actions:[o.Action.YES,o.Action.NO],emphasizedAction:o.Action.YES,onClose:function(e){var s=t.getView().getModel().getData().programs[t.programObjectPath].Projects[t.projectObjectPath].id;t.getView().getModel().getData().programs[t.programObjectPath].Projects.forEach(function(e,a){if(s==e.id){t.getView().getModel().getData().programs[t.programObjectPath].Projects.splice(a,1);t.getView().getModel().updateBindings(true);i.show("Project Deleted sucessfully",{closeOnBrowserNavigation:false});t.getView().getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");var o=sap.ui.core.UIComponent.getRouterFor(t);o.navTo("detailList",{objectId:t.programObjectPath})}})}})},handleDeleteUserPress:function(){var e=this;o.confirm("Confirm Project Delete",{title:"Confirm Deletion",icon:o.Icon.WARNING,actions:[o.Action.YES,o.Action.NO],emphasizedAction:o.Action.YES,onClose:function(t){if(t==="YES"){var s=e.getView().getModel();var a=s.getData();var o=parseInt(e.path,10);a.splice(o,1);s.updateBindings(true);i.show("Project Deleted sucessfully",{closeOnBrowserNavigation:false});e.onCloseDetailPress()}}})},OnSelectYesToDepencyPress:function(e){var t=this;if(e.getSource().getText()=="No"){this.AddTask.getContent()[0].getContent()[19].setVisible(false);this.AddTask.getContent()[0].getContent()[20].setVisible(false)}else{this.AddTask.getContent()[0].getContent()[19].setVisible(true);this.AddTask.getContent()[0].getContent()[20].setVisible(true)}},onDependencySelect:function(e){var t=this;var s=e},onDeleteDoc:function(e){console.log(e)},onSelectionChange:function(e){var t=this;var s=e.getParameters().item.getKey();if(s=="Teammember"){this.AddTask.getContent()[0].getContent()[16].setVisible(true);this.AddTask.getContent()[0].getContent()[18].setVisible(false);this.AddTask.getContent()[0].getContent()[18].setSelectedKey(" ");this.AddTask.getContent()[0].getContent()[19].setVisible(false)}else if(s=="Vendor"){this.AddTask.getContent()[0].getContent()[16].setVisible(false);this.AddTask.getContent()[0].getContent()[16].setSelectedKey(" ");this.AddTask.getContent()[0].getContent()[18].setVisible(true)}else{this.AddTask.getContent()[0].getContent()[18].setVisible(true);this.AddTask.getContent()[0].getContent()[16].setVisible(true)}},onTeamMemberRoleChange:function(e){var t=this;var s=e.getSource().getSelectedKey();e.getSource().getBindingContext("TeamMember").getObject().tmRole=s;this.getView().getModel().updateBindings(true)},handleAppListSearch:function(e){if(e.getParameter("value").length>0)var t=[new sap.ui.model.Filter("application","Contains",e.getParameter("value"))];else var t=[];this.AddTask.getBinding("items").filter(t)},handleEditUserPress:function(){var e=this.getView().getBindingContext().getObject();this.AdduserFragment.getContent()[0].getContent()[1].setValue(e.firstName);this.AdduserFragment.getContent()[0].getContent()[3].setValue(e.lastname);this.AdduserFragment.getContent()[0].getContent()[5].setValue(e.email);this.AdduserFragment.getContent()[0].getContent()[7].setValue(e.contact);this.AdduserFragment.getContent()[0].getContent()[9].setValue(e.city);this.AdduserFragment.getContent()[0].getContent()[11].setValue(e.zipCode);this.AdduserFragment.getContent()[0].getContent()[13].setSelectedKey(e.role);this.AdduserFragment.getContent()[0].getContent()[15].setValue(e.address);this.AdduserFragment.open()},handleAddUserCancelPress:function(){this.AddTask.getContent()[0].getContent()[14].setSelectedKey(null);this.AddTask.getContent()[0].getContent()[16].setSelectedKey(null);this.AddTask.getContent()[0].getContent()[12].setValue(null);this.AddTask.getContent()[0].getContent()[10].setValue(null);this.AddTask.getContent()[0].getContent()[8].setValue(null);this.AddTask.getContent()[0].getContent()[3].setValue(null);this.AddTask.getContent()[0].getContent()[1].setValue(null);this.AddTask.getContent()[0].getContent()[6].setValue(null);this.AddTask.close()},handleSearch:function(e){var t=e.getParameter("value");var s=new n("Name",r.Contains,t);var a=e.getSource().getBinding("items");a.filter([s])},handleSearchCustomerPress:function(e){var t=e.getParameter("value");var s=new n("customerName",r.Contains,t);var a=e.getSource().getBinding("items");a.filter([s])},onaddTeamConfirm:function(e){if(e.getParameters().selectedItems.length>0){for(var t=0;t<e.getParameters().selectedItems.length;t++){var s=e.getParameters().selectedItems[t].getBindingContext().getObject();s.role=e.getParameters().selectedItems[t].getCells()[3].getSelectedKey();this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].assigned_teammember.push(s)}this.getView().getModel().updateBindings(true);i.show("Team Member Added Successfully!")}else{i.show("Please select a member to add to project!")}},onConfirm:function(e){var t=false;var s=e.getParameters().selectedItems[0].getBindingContextPath().split("/")[1];var a=e.getParameters().selectedItems[0].getBindingContext("vendorInfo").getObject();var o=this.getView().byId("vendorTable").getItems();for(var n=0;n<o.length;n++){if(o[n].getCells()[0].getText()==a.vendor_Name){t=true;break}}if(!t)this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].assignedVendors.push(a);var r=e.getSource().getBinding("items");r.filter([]);this.getView().getModel().refresh();var l=e.getParameter("selectedContexts");if(l&&l.length&&t==false){i.show("Vendor Added Successfully!")}else i.show("Vendor is already present!")},onConfirmCustomer:function(e){var t=false;var s=e.getParameters().selectedItems[0].getBindingContextPath("customerdata").split("/")[1];var a=e.getParameters().selectedItems[0].getBindingContext("customerdata").getObject();var o=this.getView().byId("CustomersTable").getItems();for(var n=0;n<o.length;n++){if(o[n].getCells()[0].getText()==a.customerName){t=true;break}}if(!t)this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].customer.push(a);var r=e.getSource().getBinding("items");r.filter([]);this.getView().getModel().updateBindings(true);this.getView().getModel().refresh();var l=e.getParameter("selectedContexts");if(l&&l.length&&t==false){i.show("Customer Added Successfully!")}else i.show("Customer is already present!")},vendorFragmentCancelPress:function(){this.assignedVendors.close()},assignTeamMemberFragmentCancelPress:function(){this.assignTeamFragment.close()},handleAddTaskOkPress:function(){var e=this;var t;if(this.isEditTask){var s=this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath];var a=this.AddTask.getContent()[0].getContent();if(a[3].getValue()==""){t=a[4].getValue()}else{t=a[3].getValue()}var i={assignedTeamMember:a[16].getSelectedKey(),assignedTo:a[18].getSelectedKey(),deadLineDate:a[12].getValue(),endDate:a[10].getValue(),startDate:a[8].getValue(),taskStatus:t,taskName:a[1].getValue(),taskdesp:a[6].getValue(),dependentTask:a[21].getSelectedItem()==null?"":a[21].getSelectedItem().getText(),assignedvendor:a[18].getSelectedKey()};s.tasktable.splice(parseInt(this.taskPath),1);s.tasktable.splice(parseInt(this.taskPath),0,i)}else{var s=this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath];var a=this.AddTask.getContent()[0].getContent();if(a[3].getValue()==""){t=a[4].getValue()}else{t=a[3].getValue()}var i={assignedTeamMember:a[16].getSelectedKey(),assignedTo:a[18].getSelectedKey(),deadLineDate:a[12].getValue(),endDate:a[10].getValue(),startDate:a[8].getValue(),taskStatus:t,taskName:a[1].getValue(),taskdesp:a[6].getValue(),dependentTask:a[21].getSelectedItem()==null?"":a[21].getSelectedItem().getText(),assignedvendor:a[18].getSelectedKey()};s.tasktable.push(i)}this.getView().getModel().updateBindings(true);this.handleAddUserCancelPress()},userNameClicked:function(e){var t=this;this.getView().getModel("appView").setProperty("/layout","ThreeColumnsEndExpanded");this.getOwnerComponent().getRouter().navTo("ProccessFlowView")},deleteTeamMember:function(e){var t=this;var s=this.getView().byId("assignTeamMembers").getSelectedContexts();var a=this.getView().byId("assignTeamMembers").getSelectedItems();if(s.length>0){var i=false,o=[];var n=this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].tasktable;for(var r=0;r<n.length;r++){for(var l=0;l<a.length;l++){if(n[r].assignedTeamMember==a[l].getCells()[0].getText()){i=true;o.push(r)}}}if(!i){for(var g=s.length-1;g>=0;g--){this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].assigned_teammember.splice(s[g].sPath.split("/assigned_teammember/")[1],1);try{this.getView().byId("assignTeamMembers").getItems()[s[g].sPath.split("/assigned_teammember/")[1]].setSelected(false)}catch(e){}}this.getView().getModel().updateBindings(true)}else{sap.m.MessageBox.warning("Selected Team Member assigned to some tasks, unable to delete the Team Member.",{onClose:function(e){if(e=="OK"){}}})}}else{sap.m.MessageBox.warning("Please select atleast one item.")}},onSelectTask:function(e){var t=this;var s=e.getParameter("selectedContexts");t.appObject=[];e.getParameters().selectedContexts.forEach(function(e,s){var a=false;if(t.appObject){var i=t.appObject;for(var o=0;o<i.length;o++){if(i[o].taskName==e.getObject().taskName){a=true;break}}}if(!a)t.appObject.push(e.getObject())});this.addMileStoneInfo.getModel().getData()["nodes"]=this.appObject;this.addMileStoneInfo.getModel().getData()["lanes"]=this.appObject;this.addMileStoneInfo.getModel().updateBindings(true)},onAdd:function(){var e=this;var t=0;var s=0;var a=this.ValidateMilestoneFragmentFields();if(a==0){if(!this.editMilestoneFlag){var i=this.addMileStoneInfo.getModel().getData();for(var o=0;o<i.nodes.length;o++){t++;i.nodes[o].id=t;i.nodes[o].lane=s;i.nodes[o].taskStatus="In Progress";i.status="Warning";if(t==i.nodes.length){i.nodes[o].children=[]}else{i.nodes[o].children=[t]}i.lanes[o].id=s;i.lanes[o].position=s;s++}this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].milestones.push(i);var n=this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].tasktable;for(var r=0;r<i.nodes.length;r++){for(var l=0;l<n.length;l++){if(n[l].taskName==i.nodes[r].taskName){n[l].milestoneName=i.milestoneName}}}if(i.nodes.length==1){i.startDate_M=i.nodes[0].startDate.split("/").join("-");i.endDate_M=i.nodes[0].endDate.split("/").join("-")}else{var g=[];var d;var c;for(var h=0;h<i.nodes.length;h++){if(i.nodes[h].startDate.includes("/")){d=i.nodes[h].startDate.split("/").reverse().join("-")}else{d=i.nodes[h].startDate.split("-").reverse().join("/")}g.push(new Date(d));if(i.nodes[h].endDate.includes("/")){c=i.nodes[h].endDate.split("/").reverse().join("-")}else{c=i.nodes[h].endDate.split("-").reverse().join("/")}g.push(new Date(c))}var u=new Date(Math.max.apply(null,g)).toLocaleDateString("pt-PT");var m=new Date(Math.min.apply(null,g)).toLocaleDateString("pt-PT");i.startDate_M=m.split("/").join("-");i.endDate_M=u.split("/").join("-")}}this.getView().getModel().updateBindings(true);this.addMileStoneInfo.close()}else{sap.m.MessageBox.error("Please fill Mandatory fields.")}},ValidateMilestoneFragmentFields:function(){var e=0;if(this.addMileStoneInfo.getContent()[0].getContent()[1].getValue()==""||this.addMileStoneInfo.getContent()[0].getContent()[1].getValue()==null){e++}else{}if(this.addMileStoneInfo.getContent()[0].getContent()[3].getValue()==""||this.addMileStoneInfo.getContent()[0].getContent()[3].getValue()==null){e++}else{}if(this.addMileStoneInfo.getContent()[0].getContent()[5].getTokens().length==0){e++}else{}return e},onClear:function(){var e=this;var t={milestoneName:"",milestonedes:"",startDate_M:"",endDate_M:"",status:"Success"};var s=new sap.ui.model.json.JSONModel(t);this.addMileStoneInfo.setModel(s);this.addMileStoneInfo.close()},handleDeleteTask:function(e){var t=this;var s=this.getView().byId("pagesAccessId").getSelectedItems().length;var a=this.getView().byId("pagesAccessId").getItems();if(s>0){var n=this.getView().byId("pagesAccessId").getSelectedContexts()[0].sPath.split("/")[6];o.confirm("Are you sure you want to delete task?",{title:"Confirm Deletion",icon:o.Icon.WARNING,actions:[o.Action.YES,o.Action.NO],emphasizedAction:o.Action.YES,onClose:function(e){if(e==="YES"){var a=t.getView().getModel().getData().programs[t.programObjectPath].Projects[t.projectObjectPath];var o=a.tasktable;var n=[];var r="";for(var l=0;l<o.length;l++){for(var g=0;g<s;g++){if(o[l].taskName==t.getView().byId("pagesAccessId").getSelectedContexts()[g].getObject().taskName){n.push(t.getView().byId("pagesAccessId").getSelectedContexts()[g].getObject())}}}for(var d=0;d<n.length;d++){o.forEach(function(e,t){if(e.taskName==n[d].taskName){o.splice(t,1)}})}t.byId("pagesAccessId").removeSelections(true);t.getView().getModel().updateBindings(true);i.show("Task Deleted sucessfully")}}})}else{sap.m.MessageBox.warning("Please select atleast one item.")}},OnToggleDeletePress:function(){var e=this;if(!this.getView().byId("Processflow").getContent()[3].getVisible()){this.getView().byId("Processflow").getContent()[3].setVisible(true);this.getView().byId("Processflow").getContent()[1].setVisible(false);this.getView().byId("Processflow").getContent()[2].setVisible(false)}else{this.getView().byId("Processflow").getContent()[3].setVisible(false);this.getView().byId("Processflow").getContent()[1].setVisible(true);this.getView().byId("Processflow").getContent()[2].setVisible(false)}},ToggleProcessflowView:function(e){this.getView().byId("processflow").setZoomLevel("One");var t=this;if(this.getView().byId("chartContainer").getFullScreen()){window.history.go(-1)}if(e.getParameters().selectedItem){var s=parseInt(e.getParameters().selectedItem.oBindingContexts.undefined.sPath.split("/")[6]);var a=t.getView().getModel().getData().programs[t.programObjectPath].Projects[t.projectObjectPath].milestones[s];this.getView().getModel("processFlowModel").getData().lanes=[];this.getView().getModel("processFlowModel").getData().nodes=[];this.getView().getModel("processFlowModel").getData().lanes=a.lanes;this.getView().getModel("processFlowModel").getData().nodes=a.nodes;this.getView().getModel("processFlowModel").updateBindings(true)}if(!this.getView().byId("Processflow").getContent()[2].getVisible()){this.getView().byId("Processflow").getContent()[1].setVisible(false);this.getView().byId("Processflow").getContent()[2].setVisible(true)}else{this.getView().byId("Processflow").getContent()[1].setVisible(true);this.getView().byId("Processflow").getContent()[2].setVisible(false)}},onIconTabSel:function(e){var t=this;if(e.getParameters().selectedKey=="IconTabBarMileStone"){this.getView().byId("Processflow").getContent()[1].setVisible(true);this.getView().byId("Processflow").getContent()[2].setVisible(false)}},handleAddDocumentOkPress:function(){this.fileData.keyword=this.AddDocumentFragment.getContent()[0].getContent()[1].getValue();this.fileData.shortDescription=this.AddDocumentFragment.getContent()[0].getContent()[2].getValue();this.fileData.LinkedTask=this.AddDocumentFragment.getContent()[0].getContent()[3].getSelectedKey();this.fileData.Category=this.AddDocumentFragment.getContent()[0].getContent()[4].getSelectedKey();this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].documents.push(this.fileData);i.show("Document added succesfuly.");this.getView().getModel().updateBindings(true);this.AddDocumentFragment.getContent()[0].getContent()[0].setValue("");this.AddDocumentFragment.getContent()[0].getContent()[1].setValue("");this.AddDocumentFragment.getContent()[0].getContent()[2].setValue("");this.AddDocumentFragment.close()},collectFileData:function(e){var t=e.getParameter("files")[0];this.fileData={fileName:t.name,mediaType:t.type,url:"",keyword:"",shortDescription:"",LinkedTask:"",Category:""}},OnTaskLinkedChange:function(e){var t=this;var s=e.getSource().getSelectedKey();this.fileData.LinkedTask=s},handleDocclosePress:function(){this.AddDocumentFragment.close();this.clearDocfragment()},clearDocfragment:function(){this.fileData.keyword=this.AddDocumentFragment.getContent()[0].getContent()[1].setValue("");this.fileData.shortDescription=this.AddDocumentFragment.getContent()[0].getContent()[2].setValue("");this.fileData.fileName=this.AddDocumentFragment.getContent()[0].getContent()[0].setValue("")},deleteMileStone:function(e){var t=this;var s=e.getSource().getBindingContext().getObject();t.getView().getModel().getData().programs[t.programObjectPath].Projects[t.projectObjectPath].milestones.forEach(function(e,a){if(s.milestoneName==e.milestoneName){t.getView().getModel().getData().programs[t.programObjectPath].Projects[t.projectObjectPath].milestones.splice(a,1);t.getView().getModel().updateBindings(true)}})},deletecustomer:function(e){var t=this;var s=this.getView().byId("CustomersTable").getSelectedItems().length;var a=this.getView().byId("CustomersTable").getItems();if(s>0){var n=this.getView().byId("CustomersTable").getSelectedContexts()[0].sPath.split("/")[6];o.confirm("Are you sure you want to delete customer?",{title:"Confirm Deletion",icon:o.Icon.WARNING,actions:[o.Action.YES,o.Action.NO],emphasizedAction:o.Action.YES,onClose:function(e){if(e==="YES"){var a=t.getView().getModel().getData().programs[t.programObjectPath].Projects[t.projectObjectPath];var o=a.customer;var n=[];var r="";for(var l=0;l<o.length;l++){for(var g=0;g<s;g++){if(o[l].customerName==t.getView().byId("CustomersTable").getSelectedContexts()[g].getObject().customerName){n.push(t.getView().byId("CustomersTable").getSelectedContexts()[g].getObject())}}}for(var d=0;d<n.length;d++){o.forEach(function(e,t){if(e.customerName==n[d].customerName){o.splice(t,1)}})}t.getView().getModel().updateBindings(true);i.show("Customer Deleted sucessfully")}}})}else{sap.m.MessageBox.warning("Please select atleast one item.")}},deleteVendors:function(e){var t=this;var s=this.getView().byId("vendorTable").getSelectedContexts();if(s.length>0){var a=this.getView().byId("vendorTable").getSelectedItems();var i=false,o=[];var n=this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].tasktable;for(var r=0;r<n.length;r++){for(var l=0;l<a.length;l++){if(n[r].assignedTo==a[l].getCells()[0].getText()){i=true;o.push(r)}}}if(!i){for(var g=s.length-1;g>=0;g--){this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].assignedVendors.splice(s[g].sPath.split("/assignedVendors/")[1],1);try{this.getView().byId("vendorTable").getItems()[s[g].sPath.split("/assignedVendors/")[1]].setSelected(false)}catch(e){}}this.getView().getModel().updateBindings(true)}else{sap.m.MessageBox.warning("Selected Vendors assigned to some tasks, Unable to delete",{onClose:function(e){if(e=="OK"){}}})}}else{sap.m.MessageBox.warning("Please select atleast one item.")}},ValidateEditAddProjectFragment:function(){var e=0;if(this.EditProject.getContent()[0].getContent()[2].getValue()==""||this.EditProject.getContent()[0].getContent()[2].getValue()==null){e++}else{}if(this.EditProject.getContent()[0].getContent()[4].getValue()==""||this.EditProject.getContent()[0].getContent()[4].getValue()==null){e++}else{}if(this.EditProject.getContent()[0].getContent()[6].getValue()==""||this.EditProject.getContent()[0].getContent()[6].getValue()==null){e++}else{}if(this.EditProject.getContent()[0].getContent()[8].getValue()==""||this.EditProject.getContent()[0].getContent()[8].getValue()==null){e++}else{}if(this.EditProject.getContent()[0].getContent()[11].getTokens().length==0){e++}else{}if(this.EditProject.getContent()[0].getContent()[14].getTokens().length==0){e++}else{}return e},openArchiveProgram:function(e){var t=this;this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].status="Archived";this.getView().getModel("appView").getData().detailthis.getView().getModel("ProgramsModel").getData().Projects[this.projectObjectPath].status="Archived";this.getView().getModel().updateBindings(true);this.getView().getModel("appView").getData().detailthis.getView().getModel("ProgramsModel").updateBindings(true);this.getView().getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");var s=sap.ui.core.UIComponent.getRouterFor(this);this.onCloseDetailPress()},openCancelProgram:function(e){var t=this;this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].status="Cancelled";this.getView().getModel().updateBindings(true);this.getView().getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");var s=sap.ui.core.UIComponent.getRouterFor(this);s.navTo("detailList",{objectId:this.programObjectPath})},openRetriveProgram:function(e){var t=this;if(this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].status=="Archived"){this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].status="In Progress";this.getView().getModel("appView").getData().detailthis.getView().getModel("ProgramsModel").getData().Projects[this.projectObjectPath].status="In Progress"}else{this.getView().getModel().getData().programs[this.programObjectPath].Projects[this.projectObjectPath].status="In Progress";this.getView().getModel("appView").getData().detailthis.getView().getModel("ProgramsModel").getData().Projects[this.projectObjectPath].status="In Progress"}this.getView().getModel().updateBindings(true);this.getView().getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");var s=sap.ui.core.UIComponent.getRouterFor(this);this.getView().getModel("appView").getData().detailthis.getView().getModel("ProgramsModel").updateBindings(true);this.onCloseDetailPress()},teamMemRoles:function(){var e=this.getOwnerComponent().getModel("roles").getData();var t=[];for(var s=0;s<e.length;s++){if(e[s].roleType==="solutionRole"){t.push(e[s])}}var i=new a(t);this.getView().setModel(i,"rolesModel")},handleTeamDetailCancel:function(){this.TeamMemberDetails.close()}})});