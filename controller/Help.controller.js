sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment"],function(t,e){"use strict";return t.extend("MDG.Help.controller.Help",{onInit:function(){var t=this;t.maxId=100+t.getOwnerComponent().getModel("customerInfo").getData().length;this.handleCustomerData();var e=0;this.handleUserData();this.handleMasterQuotationTableDetails();sap.ui.core.UIComponent.getRouterFor(this).getRoute("Master").attachPatternMatched(this._objPatternMatched,this)},_objPatternMatched:function(){this.handleCustomerData()},press:function(t){var e,a=t.getSource().getHeader();if(a=="Customers"){e=0}else if(a=="Quotation"){e=1}var o=this.getOwnerComponent().getRouter();o.navTo("Master",{id:e});this.getView().getModel("appView").setProperty("/tileIndex",e)},handleCustomerData:function(){var t=this;$.ajax({url:"/DanaoStrapi/api/d-customers?populate=*",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){var a=[];for(var o=0;o<e.data.length;o++){var s={id:e.data[o].id,createdAt:e.data[o].attributes.createdAt,dBillingAddress:e.data[o].attributes.dBillingAddress,dCustomerName:e.data[o].attributes.dCustomerName,dOfficePhone:e.data[o].attributes.dOfficePhone,dWebsite:e.data[o].attributes.dWebsite,publishedAt:e.data[o].attributes.publishedAt,updatedAt:e.data[o].attributes.updatedAt,dCustomerContact_Name:e.data[o].attributes.d_customer_contacts.data.length>0?e.data[o].attributes.d_customer_contacts.data[0].attributes.dCustomerContact_Name:"",projectCount:e.data[o].attributes.d_customer_projects.data.length};a.push(s)}t.getView().byId("customerValue").setValue(a.length);t.getOwnerComponent().setModel(new sap.ui.model.json.JSONModel(a),"customerInfo");t.getView().setModel(new sap.ui.model.json.JSONModel(a),"customerModel")}})},handleUserData:function(){var t=this;$.ajax({url:"/DanaoStrapi/api/users?populate=*",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){var a=[];for(var o=0;o<e.length;o++){var s={id:e[o].id,firstName:e[o].firstName,company:e[o].company,status:e[o].status};a.push(s)}t.getView().byId("userValue").setValue(a.length);t.getView().setModel(new sap.ui.model.json.JSONModel(a),"UserNameModel")}})},handleMasterQuotationTableDetails:function(){var t=this;$.ajax({url:"/DanaoStrapi/api/d-customer-quotations?populate=*&pagination[pageSize]=500",type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){var a=e.data;if(e.data.length>0)var o=e.data;else var o=[];var s=[];for(var r=0;r<o.length;r++){s.push({id:o[r].id,dCustomerName:o[r].attributes.d_customer.data===null?"":o[r].attributes.d_customer.data.attributes.dCustomerName,dCustomer_ProjectName:o[r].attributes.d_customer_project.data==null?"":o[r].attributes.d_customer_project.data.attributes.dCustomer_ProjectName,DQuotation_Status:o[r].attributes.DQuotation_Status,createdAt:o[r].attributes.createdAt,dQuotation_Item_Price:o[r].attributes.dQuotation_Item_Price,dQuotation_Item_Quantity:o[r].attributes.dQuotation_Item_Quantity,publishedAt:o[r].attributes.publishedAt,updatedAt:o[r].attributes.updatedAt})}t.getView().byId("quotationValue").setValue(s.length);t.getView().setModel(new sap.ui.model.json.JSONModel(s),"QuotationMasterModel")}})},pressQuotationTile:function(t){var e=this;var a,o=t.getSource().getHeader();if(o=="Quotation"){a=0}else if(o=="Customers"){a=1}this.getOwnerComponent().getRouter().navTo("MasterQuotaion",{id:a});this.getView().getModel("appView").setProperty("/tileIndex",a)},handleApproveUserPress:function(){var t=this;this.getOwnerComponent().getRouter().navTo("MasterUser")}})});