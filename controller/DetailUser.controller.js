sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Context","sap/m/MessageBox","MDG/Help/util/formatter"],function(e,t,a,s){"use strict";return e.extend("MDG.Help.controller.DetailUser",{formatter:s,onInit:function(){console.log("test");this.oBundle=this.getOwnerComponent().getModel("i18n").getResourceBundle();var e=this;this.getOwnerComponent().getRouter().getRoute("DetailUser").attachPatternMatched(function(a){var s=e.getOwnerComponent().getModel("UserNameModel");e.path=a.getParameter("arguments").module;this.getView().getModel("appView").oData.RequestIdSelected=a.getParameter("arguments").id;var o=new t(s,"/"+e.path);e.getView().setModel(new sap.ui.model.json.JSONModel(o.getObject()));e.handleSalesUserTypeData(a.getParameter("arguments").id);e.userId=a.getParameter("arguments").id},this);e.maxId=100+e.getOwnerComponent().getModel("UserNameModel").getData().length},handleSalesUserTypeData:function(e){var t=this;$.ajax({url:"/DanaoStrapi/api/d-customer-projects?populate=*&filters[id][$eq]="+e,type:"GET",headers:{"content-type":"application/json"},dataType:"json",success:function(e){if(e.data.length>0){if(e.data[0].attributes.d_project_sales_stage!==undefined&&e.data[0].attributes.d_project_sales_stage.data!==null&&e.data[0].attributes.d_project_sales_stage.data.attributes!==undefined&&e.data[0].attributes.d_project_sales_stage.data.attributes.DProject_Sales_Stage!==undefined)t.getView().byId("SalesUserTypeId").setText(e.data[0].attributes.d_project_sales_stage.data.attributes.DProject_Sales_Stage);else t.getView().byId("SalesUserTypeId").setText("")}else{t.getView().byId("SalesUserTypeId").setText("")}}})},fullScreen:function(){this.getView().getModel("appView").setProperty("/layout","MidColumnFullScreen");this.byId("enterFullScreen").setVisible(false);this.byId("exitFullScreen").setVisible(true)},exitFullScreen:function(){this.getView().getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.byId("exitFullScreen").setVisible(false);this.byId("enterFullScreen").setVisible(true)},onCloseDetailPress:function(){var e=this.getView().getModel("appView").getProperty("/actionButtonsInfo/midColumn/closeColumn");this.getView().getModel("appView").setProperty("/layout","OneColumn");var t=sap.ui.core.UIComponent.getRouterFor(this);t.navTo("MasterUser")},onApprovePress:function(){var e=this;var t={id:this.getView().getModel().oData.id,status:"APPROVED"};$.ajax({url:"/DanaoStrapi/api/users/"+this.getView().getModel().oData.id,type:"PUT",headers:{"content-type":"application/json"},data:JSON.stringify(t),dataType:"json",success:function(t){a.success("User has been Approved");e.getView().getModel().oData.status="APPROVED";e.getView().getModel().updateBindings(true);var s=e.getView().getModel("appView").getProperty("/actionButtonsInfo/midColumn/closeColumn");e.getView().getModel("appView").setProperty("/actionButtonsInfo/midColumn/closeColumn",!s);e.getView().getModel("appView").setProperty("/layout","OneColumn");e.getView().getModel().updateBindings(true);e.getOwnerComponent().getRouter().navTo("MasterUser")}})},onRejectPress:function(){var e=this;var t={id:this.getView().getModel().oData.id,status:"REJECTED"};$.ajax({url:"/DanaoStrapi/api/users/"+this.getView().getModel().oData.id,type:"PUT",headers:{"content-type":"application/json"},data:JSON.stringify(t),dataType:"json",success:function(t){a.success("User has been Rejected");e.getView().getModel().oData.status="REJECTED";e.getView().getModel().updateBindings(true);var s=e.getView().getModel("appView").getProperty("/actionButtonsInfo/midColumn/closeColumn");e.getView().getModel("appView").setProperty("/actionButtonsInfo/midColumn/closeColumn",!s);e.getView().getModel("appView").setProperty("/layout","OneColumn");e.getView().getModel().updateBindings(true);e.getOwnerComponent().getRouter().navTo("MasterUser")}})}})});